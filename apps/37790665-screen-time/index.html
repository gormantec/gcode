<!DOCTYPE html>
<html><head><link rel="manifest" href="/apps/37790665-screen-time/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta property="fpwa:template" content="pwa=true,name=screen time,short_name=screen time,theme_color=#212121,background_color=#212121,display=standalone,orientation=any"><link rel="apple-touch-icon" href="/apps/37790665-screen-time/icon.png"><link rel="apple-touch-icon-precomposed" href="/apps/37790665-screen-time/icon.png"><link rel="icon" href="/apps/37790665-screen-time/icon.png"><script>
  window.PWA={globals:{}};
  window.PWA.globals.appName="screen time";
  window.PWA.globals.orientation="any";
  window.PWA.globals.icon="git://gormantec:gcode_repo/testIcon2.svg";
  window.PWA.globals.icon180x180="git://gormantec:gcode_repo/testIcon2.svg";
  window.PWA.globals.icon192x192="git://gormantec:gcode_repo/testIcon2.svg";
  window.PWA.globals.icon512x512="git://gormantec:gcode_repo/testIcon2.svg";
  window.PWA.globals.splash="git://gormantec:gcode_repo/testIcon2.svg";
  window.PWA.globals.splashColor="#F0F0F0";
  window.PWA.globals.mockFrame="iphoneX";
  window.PWA.globals.splashBackgroundColor="#212121";
  window.PWA.globals.splashDuration=100;

let deferredPrompt;
if('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/apps/37790665-screen-time/sw.js');
};

function addToHomeScreen() {
   let a2hsBtn = document.querySelector(".ad2hs-prompt");
   a2hsBtn.style.display = 'none'; 
   deferredPrompt.prompt();
   deferredPrompt.userChoice.then(function(choiceResult){
   if (choiceResult.outcome === 'accepted') console.log('User accepted the A2HS prompt');
   else console.log('User dismissed the A2HS prompt');
   deferredPrompt = null;
 });}
function showAddToHomeScreen() {
   let a2hsBtn = document.querySelector(".ad2hs-prompt");
   a2hsBtn.style.display ="block";
   a2hsBtn.addEventListener("click", addToHomeScreen);
 }
 window.addEventListener('beforeinstallprompt', function (e) {
   e.preventDefault();
   deferredPrompt = e;
   showAddToHomeScreen();
   setTimeout(()=>{document.querySelector(".ad2hs-prompt").style.display ="none";},10000);
 });
function showIosInstall() {
  let iosPrompt = document.querySelector(".ios-prompt");
  iosPrompt.style.display = "block";
  iosPrompt.addEventListener("click", () => {
    iosPrompt.style.display = "none";
  });
}

const isIos = () => {
  const userAgent = window.navigator.userAgent.toLowerCase();
  return /iphone|ipad|ipod/.test( userAgent );
}
const isInStandaloneMode = () => ('standalone' in window.navigator) && (window.navigator.standalone);
document.addEventListener("DOMContentLoaded", ()=>{
   console.log("DOMContentLoaded");
   if (isIos() && !isInStandaloneMode()) {
  showIosInstall();
   console.log("showIosInstall");
  }
});

</script><script type="module">
import { addkey } from "https://gcode.com.au/modules/near/index.mjs";

if (window.opener && window.opener !== window) {
    window.addEventListener("message",function(e){if(e.origin=="https://gcode.com.au")addkey(e.data);},false);
    window.addEventListener("load", (event) => {window.opener.postMessage("loaded","https://gcode.com.au");});
}

</script><script type="module">
/*
  filename:git://gormantec:gcode_repo/screen-time.lib.mjs
  created: 2022-1-3T08:26:13
  appName: screen time
  splash: git://gormantec:gcode_repo/testIcon2.svg
  icon: git://gormantec:gcode_repo/testIcon2.svg
  icon180x180: git://gormantec:gcode_repo/testIcon2.svg
  icon192x192: git://gormantec:gcode_repo/testIcon2.svg
  icon512x512: git://gormantec:gcode_repo/testIcon2.svg
  mockFrame: iphoneX
  splashBackgroundColor: #212121
  splashDuration: 100
  splashSize: 180px
*/



/*---------------------------------------------------------------------------*/
import {
    PWA,    
    Page,
    Div
} from 'https://gcode.com.au/modules/pwa.mjs';

import {Row,Column, OutlinedButton,Text} from './lib/flutter-widgets.lib.mjs';
import {gps} from './lib/gps.lib.mjs';

try {
    Page.clearPages();            
} catch (e) {}    
/*---------------------------------------------------------------------------*/
class HomePage extends Page {
    constructor() {
        super({
            "hideFloatingActionButton": "true",             
            "color": "black",
            "backgroundColor": "black",

            "children": [
                new Div({
                    textAlign: "center",
                    paddingRight: "2px",
                    fontSize: "30px",
                    "marginTop": "50px",
                    "position": "relative",
                    "width": "370px",
                    "height": "50px",
                    "marginLeft": "auto",
                    "marginRight": "auto",
                    color: "white",
                    innerText: "Kids WIFI"
                }),
              new Div({
                    "marginTop": "50px",
                    "position": "relative",
                    "width": "370px",
                    "height": "50px",
                    "marginLeft": "auto",
                    "marginRight": "auto",
                }),
              new OutlinedButton({
                    			    "id":"lockB1",
                					"position": "relative",
                                    color: "red",
                    				paddingTop: "15px",
                                    backgroundColor: "#323232",
                                  	fontSize:"50px",
                                    "width": "350px",
                					"borderRadius":"10px",
                                    "height": "70px",
                                    "marginLeft": "auto",
                                    "marginRight": "auto",
                                    "marginTop": "30px",
                					"fontWeight":"900",
                                    "child": new Text("LOCKED"),
                                    "onclick": (e) => {
                                      let lockB1=document.getElementById("lockB1");
                                      let lockB2=document.getElementById("lockB2");
                                      if(lockB1.style.backgroundColor!="#323232")
                                      { 
                                      	lockB1.style.backgroundColor="#323232";
                                      	lockB2.style.backgroundColor="#111111";
                                        lockB1.firstChild.firstChild.innerText="LOCKED";
                                        lockB2.firstChild.firstChild.innerText="UNLOCK";
                                        lockB1.style.fontWeight="900";
                                        lockB2.style.fontWeight="normal";
                                      }
                                    }
                                }),
              new OutlinedButton({
                    			    "id":"lockB2",
                    				"position": "relative",
                                    color: "green",
                    				paddingTop: "15px",
                                    backgroundColor: "#111111",
                                  	fontSize:"50px",
                                    "width": "350px",
                					"borderRadius":"10px",
                                    "height": "70px",
                                    "marginLeft": "auto",
                                    "marginRight": "auto",
                                    "marginTop": "30px",
                                    "child": new Text("UNLOCK"),
                                    "onclick": (e) => {
                                      let lockB1=document.getElementById("lockB1");
                                      let lockB2=document.getElementById("lockB2");
                                      if(lockB1.style.backgroundColor!="#323232")
                                      {
                                      	lockB1.style.backgroundColor="#111111";
                                      	lockB2.style.backgroundColor="#323232";
                                        lockB1.firstChild.firstChild.innerText="LOCK";
                                        lockB2.firstChild.firstChild.innerText="UNLOCKED";
                                        lockB1.style.fontWeight="normal";
                                        lockB2.style.fontWeight="900";

                                        
                                        (async () => {
                                          let rawResponse = await fetch('http://192.168.8.80:8082/api/v1/servers/localhost/zones', {
                                            method: 'POST',
                                            headers: {
                                              'Accept': 'application/json',
                                              'Content-Type': 'application/json',
                                              'X-API-Key': '12345678901$'
                                            },
                                            body: JSON.stringify({"name": "google.com.au.","kind": "Forwarded","recursion_desired":false,"servers":[ "127.0.0.1:5300" ]})
                                          });
                                          const content = await rawResponse.json();

                                          console.log(content);
                                        })();
                                        
                                        
                                      }
                                    }
                                })


            ]
        });
    }

}

//https://gcode.com.au/apps/37790665-gps/images/gps-180-180.png

/*---------------------------------------------------------------------------*/

var aHomePage = new HomePage();
var aPWA = new PWA({
    title: "gcode screen time",
    footer: "https://www.gormantec.com",
    primaryColor: "#212121",
});
aPWA.setPage(aHomePage);
aPWA.show();
/*---------------------------------------------------------------------------*/

</script></head><body><div class="splash"></div><div class="loader">Loading...</div></body></html>