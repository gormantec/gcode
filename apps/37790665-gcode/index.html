<!DOCTYPE html>
<html><head><link rel="manifest" href="/apps/37790665-gcode/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="description" content="A gcode developed PWA app"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta property="fpwa:template" content="pwa=true,name=gcode,short_name=gcode,theme_color=#ffffff,background_color=#ffffff,display=standalone,orientation=any"><link rel="apple-touch-icon" href="/apps/37790665-gcode/icon.png"><link rel="apple-touch-icon-precomposed" href="/apps/37790665-gcode/icon.png"><link rel="icon" href="/apps/37790665-gcode/icon.png"><style>
.splash{position:absolute;background-size:300px;background-image:url('splash.icon.png');background-position:center;background-repeat:no-repeat;top:0px;bottom:0px;left:0px;right:0px;color:#0F0F0F;background-color:#ffffff;}
.loader{font-size:50px;text-indent:-9999em;overflow:hidden;width:1em;height:1em;border-radius:50%;margin:72px auto;position:absolute;bottom:20px;left:20px;right:20px;bottom:0;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-animation:load6 1.7s infinite ease,round 1.7s infinite ease;animation:load6 1.7s infinite ease,round 1.7s infinite ease}@-webkit-keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}100%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}100%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@-webkit-keyframes round{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes round{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}
</style><script>
  window.PWA={globals:{}};
  window.PWA.globals.appName="gcode";
  window.PWA.globals.orientation="any";
  window.PWA.globals.icon="icon.png";
  window.PWA.globals.icon180x180="180x180.icon.png";
  window.PWA.globals.icon192x192="192x192.icon.png";
  window.PWA.globals.icon512x512="512x512.icon.png";
  window.PWA.globals.splash="splash.png";
  window.PWA.globals.splashColor="#0F0F0F";
  window.PWA.globals.mockFrame="iphoneX";
  window.PWA.globals.splashBackgroundColor="#ffffff";
  window.PWA.globals.splashDuration=0;

let deferredPrompt;
if('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/apps/37790665-gcode/sw.js');
};

function addToHomeScreen() {
   let a2hsBtn = document.querySelector(".ad2hs-prompt");
   a2hsBtn.style.display = 'none'; 
   deferredPrompt.prompt();
   deferredPrompt.userChoice.then(function(choiceResult){
   if (choiceResult.outcome === 'accepted') console.log('User accepted the A2HS prompt');
   else console.log('User dismissed the A2HS prompt');
   deferredPrompt = null;
 });}
function showAddToHomeScreen() {
   let a2hsBtn = document.querySelector(".ad2hs-prompt");
   if(a2hsBtn)a2hsBtn.style.display ="block";
   if(a2hsBtn)a2hsBtn.addEventListener("click", addToHomeScreen);
 }
 window.addEventListener('beforeinstallprompt', function (e) {
   e.preventDefault();
   deferredPrompt = e;
   showAddToHomeScreen();
   setTimeout(()=>{
    let ad2hs=document.querySelector(".ad2hs-prompt");
    if(ad2hs) ad2hs.style.display ="none";
},10000);
 });
function showIosInstall() {
  let iosPrompt = document.querySelector(".ios-prompt");
  if(iosPrompt)iosPrompt.style.display = "block";
  if(iosPrompt)iosPrompt.addEventListener("click", () => {
  if(iosPrompt)iosPrompt.style.display = "none";
  });
}

const isIos = () => {
  const userAgent = window.navigator.userAgent.toLowerCase();
  return /iphone|ipad|ipod/.test( userAgent );
}
const isInStandaloneMode = () => ('standalone' in window.navigator) && (window.navigator.standalone);
document.addEventListener("DOMContentLoaded", ()=>{
   console.log("DOMContentLoaded");
   if (isIos() && !isInStandaloneMode()) {
  showIosInstall();
   console.log("showIosInstall");
  }
});

</script><script type="module">
import { addkey } from "https://gcode.com.au/modules/near/index.mjs";

if (window.opener && window.opener !== window) {
    window.addEventListener("message",function(e){if(e.origin=="https://gcode.com.au")addkey(e.data);},false);
    window.addEventListener("load", (event) => {window.opener.postMessage("loaded","https://gcode.com.au");});
}

</script><script type="module">
/*

  filename:git://gormantec:gcode_repo/find-my-airpodsj.mjs
  created: 2024-2-4T14:34:38
  appName: gcode
  splashSize: 300px
 splash: https://gcode.com.au/images/ios/ios-appicon-180-180.png
  icon: https://gcode.com.au/images/ios/ios-appicon-180-180op.png
  icon180x180: https://gcode.com.au/images/ios/ios-appicon-180-180op.png
  mockFrame: iphoneX
  splashBackgroundColor: #ffffff
  splashDuration: 0

*/

/*---------------------------------------------------------------------------*/
import { PWA, Page, Div } from 'https://gcode.com.au/modules/pwa.mjs';
import {gps} from './lib/gps.lib.mjs';
try { Page.clearPages(); } catch (e) {}
/*---------------------------------------------------------------------------*/
const options = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 8000,
};
const errorLog=function(err){console.warn("ERROR("+err.code+": "+err.message+")")}
let leftLight=new Div({"backgroundColor": "#FFA500", id:"leftButton", height:"40px", width:"40px",left:"100px",top:"120px", borderRadius:"40px"});
let flashFunction=function(){
  let count=0;
setInterval(function(){
  if(leftLight.element.style.backgroundColor=="rgb(255, 165, 0)")
  { 
  	leftLight.element.style.backgroundColor="#aaaaaa";
  }
  else if(count==Math.round(count/8,0)*8)
  {
  	leftLight.element.style.backgroundColor="rgb(255, 165, 0)";
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition((position)=>{
        console.log("position:"+position.coords.latitude+"x"+position.coords.longitude);
        console.log("heading:"+position.coords.heading);
        console.log("speed:"+position.coords.speed);
      },errorLog,options);
    }
  }
  count++;
 
},200);
}






if('bluetooth' in navigator) {
  const scan = leftLight.element;
  //const batteryIndicator = document.querySelector('#battery-indicator');

  scan.addEventListener('click',()=>{
  
  if (!navigator.mediaDevices?.enumerateDevices) {
  console.log("enumerateDevices() not supported.");
} else {
  // List cameras and microphones.
  navigator.mediaDevices
    .enumerateDevices()
    .then((devices) => {
      devices.forEach((device) => {
        if(device.label=="AirPods" && device.kind=="audioinput")
        {
			console.log(`${device.kind}: ${device.label} id = ${JSON.stringify(device.getCapabilities())}`);
            setAlert("AirPods");
        }
        else if(device.label=="AirPods" && device.kind=="audiooutput")
        {
			console.log(`${device.kind}: ${device.label} id = ${JSON.stringify(device)}`);
        }
      });
    })
    .catch((err) => {
      console.error(`${err.name}: ${err.message}`);
    });
}
  
  })
  
}   

class HomePage extends Page {
  constructor() {
      super({
          "color": "#ffffff",
          "backgroundColor": "#ffffff",
          "backgroundPosition": "center",
          "backgroundSize": "60%",
          "backgroundRepeat": "no-repeat",
          "backgroundImage": "url(https://logo.com/image-cdn/images/kts928pd/production/9fa92ac5a9498502d2707ced798d763fe7490ecc-1600x1026.png?w=1080&q=72)",
          "hideHeader": "true",
          "hideFooter": "true",
          "hideFloatingActionButton": "true",
          "onOpen":flashFunction,
          "children": [
            leftLight,
            new Div({"backgroundColor": "#00ff00", height:"40px", width:"40px",right:"100px",top:"120px", borderRadius:"40px"}),
            new Div({innerText:"L", textAlign:"center", "color": "#aaaaaa", height:"40px", width:"40px",left:"100px",top:"180px"}),
            new Div({innerText:"R", textAlign:"center", "color": "#aaaaaa", height:"40px", width:"40px",right:"100px",top:"180px"}),
                      ]
      });
  }

}

class SecondPage extends Page {
  constructor() {
      super({
          "color": "black",
          "backgroundColor": "white",
          "navigateBackPage": aHomePage,
          "hideHeader": "true",
          "hideFooter": "true",
          "hideFloatingActionButton": "true",
      });
  }
}
/*---------------------------------------------------------------------------*/
var myDiv=new Div({innerHTML: "url(https://gcode.com.au/html/test.html)"});
var aHomePage = new HomePage();
var aSecondPage = new SecondPage();
var aPWA = new PWA({
  "title": "find my air pods",
  "primaryColor": "#aaaaaa",
  "hideHeader": "true",
});
aPWA.setPage(aHomePage);
aPWA.hideHeader();
aPWA.show();


/*---------------------------------------------------------------------------*/

</script></head><body><div class="splash"></div><div class="loader">Loading...</div></body></html>